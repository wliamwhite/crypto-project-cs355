{"ast":null,"code":"var _jsxFileName = \"/Users/liamwhite/proj/node/websocket/crypto-project-cs355/crypto_site/client/src/index.js\";\nconst server = new WebSocket('ws://localhost:8080'); // const server = new WebSocket('wss://dhmcvxkisb.execute-api.us-east-2.amazonaws.com/dev')\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App.jsx'; // easily identify input and button\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst input = document.getElementById('message');\nconst startDatafeedButton = document.getElementById('send');\nconst endDatafeedButton = document.getElementById('end');\nconst startTime = document.getElementById('startTime');\nconst endTime = document.getElementById('endTime');\nconst startTimeReq = document.getElementById('startTimeReq');\nconst interval = document.getElementById('interval'); // to store subscribed datafeeds client-side\n\nlet topicList = []; // only enable button AFTER websocket connection hasbeen established\n\nstartDatafeedButton.disabled = true;\nendDatafeedButton.disabled = true; // do stuff on click\n\nstartDatafeedButton.addEventListener('click', () => {\n  topicList.push(input.value);\n  sendMessage(topicList);\n}, false);\nendDatafeedButton.addEventListener('click', endSession, false);\nstartTimeReq.addEventListener('click', () => {\n  const coin = input.value;\n  const start = startTime.value;\n  const end = endTime.value;\n  const type = interval.value;\n  requestBulkPriceHistory(coin, start, end, type);\n}); // send message when 'enter' is clicked\n\ndocument.addEventListener('keyup', e => {\n  if (e.key === 'Enter') {\n    topicList.push(input.value);\n    sendMessage(topicList);\n  }\n}); // enable the button upon websocket connection\n\nserver.onopen = () => {\n  startDatafeedButton.disabled = false;\n  endDatafeedButton.disabled = false;\n};\n/*\nwhen websocket client receives message (i.e. ticker & price info),\ntransform the string into an object with the imported function and\npass as props into the <App /> component\n*/\n\n\nserver.onmessage = event => {\n  let message = JSON.parse(event.data);\n  ReactDOM.render( /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(App, {\n      coin: message.ticker,\n      price: message.price\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this), document.getElementById('root'));\n}; // TODO: abstract & export, make topicList a tuple (no duplicates)\n// function to be called when sending a message\n\n\nfunction sendMessage(topicList) {\n  const toServer = {\n    action: 'establishKucoinWebsocket',\n    tickers: topicList\n  };\n  server.send(JSON.stringify(toServer));\n}\n\n;\n\nfunction requestBulkPriceHistory(coin, startAt, endAt, interval) {\n  const toServer = {\n    action: 'bulkPriceHistory',\n    tickers: coin,\n    start: startAt,\n    end: endAt,\n    type: interval\n  };\n  server.send(JSON.stringify(toServer));\n}\n\nfunction endSession() {\n  const toServer = {\n    action: 'endAllSessions',\n    tickers: topicList\n  };\n  server.send(JSON.stringify(toServer));\n}\n\n;","map":{"version":3,"sources":["/Users/liamwhite/proj/node/websocket/crypto-project-cs355/crypto_site/client/src/index.js"],"names":["server","WebSocket","React","ReactDOM","App","input","document","getElementById","startDatafeedButton","endDatafeedButton","startTime","endTime","startTimeReq","interval","topicList","disabled","addEventListener","push","value","sendMessage","endSession","coin","start","end","type","requestBulkPriceHistory","e","key","onopen","onmessage","event","message","JSON","parse","data","render","ticker","price","toServer","action","tickers","send","stringify","startAt","endAt"],"mappings":"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","sourcesContent":["const server = new WebSocket('ws://localhost:8080');\n// const server = new WebSocket('wss://dhmcvxkisb.execute-api.us-east-2.amazonaws.com/dev')\nimport React from 'react';\nimport ReactDOM from 'react-dom'\nimport App from './components/App.jsx';\n\n// easily identify input and button\nconst input = document.getElementById('message');\nconst startDatafeedButton = document.getElementById('send');\nconst endDatafeedButton = document.getElementById('end');\nconst startTime = document.getElementById('startTime');\nconst endTime = document.getElementById('endTime');\nconst startTimeReq = document.getElementById('startTimeReq');\nconst interval = document.getElementById('interval');\n\n\n// to store subscribed datafeeds client-side\nlet topicList = [];\n\n// only enable button AFTER websocket connection hasbeen established\nstartDatafeedButton.disabled = true;\nendDatafeedButton.disabled = true;\n\n// do stuff on click\nstartDatafeedButton.addEventListener('click', () => {\n    topicList.push(input.value);\n    sendMessage(topicList);\n}, false);\nendDatafeedButton.addEventListener('click', endSession, false);\n\nstartTimeReq.addEventListener('click', () => {\n    const coin = input.value;\n    const start = startTime.value;\n    const end = endTime.value;\n    const type = interval.value;\n    requestBulkPriceHistory(coin, start, end, type);\n});\n\n// send message when 'enter' is clicked\ndocument.addEventListener('keyup', e => {\n    if(e.key === 'Enter'){\n        topicList.push(input.value);\n        sendMessage(topicList);\n    }\n});\n\n// enable the button upon websocket connection\nserver.onopen = () => {\n    startDatafeedButton.disabled = false;\n    endDatafeedButton.disabled = false;\n};\n\n/*\nwhen websocket client receives message (i.e. ticker & price info),\ntransform the string into an object with the imported function and\npass as props into the <App /> component\n*/\n\nserver.onmessage = event => {\n    let message = JSON.parse(event.data);\n    ReactDOM.render(\n    <div>\n    <App\n        coin={message.ticker}\n        price={message.price}\n    />\n    </div>,\n    document.getElementById('root'))\n};\n\n\n\n\n// TODO: abstract & export, make topicList a tuple (no duplicates)\n// function to be called when sending a message\nfunction sendMessage(topicList){\n    const toServer = {\n        action: 'establishKucoinWebsocket',\n        tickers: topicList\n    };\n    server.send(JSON.stringify(toServer));\n};\n \nfunction requestBulkPriceHistory(coin, startAt, endAt, interval) {\n    const toServer = {\n        action: 'bulkPriceHistory',\n        tickers: coin,\n        start: startAt,\n        end: endAt,\n        type: interval\n    };\n    server.send(JSON.stringify(toServer));\n}\n\nfunction endSession() {\n    const toServer = {\n        action: 'endAllSessions',\n        tickers: topicList\n    };\n    server.send(JSON.stringify(toServer));\n};\n"]},"metadata":{},"sourceType":"module"}